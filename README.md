# Документация для Telegram-бота TryCan

Этот бот предоставляет функционал для анализа текста, перевода между языками, генерации текста, синтеза речи и виртуальных музеев. Он использует API от **Yandex Cloud** для генерации текста, перевода, синтеза речи, а также для анализа изображений.

---

## Основные функции

### Генерация текста с помощью Yandex GPT
- **Описание:**  
  Бот может генерировать текст на основе заданного пользователем запроса с использованием модели Yandex GPT. Это позволяет пользователю получить сгенерированный текст, отвечающий на запросы.
- **Интеграция:**  
  Используется API **Yandex GPT** через Yandex Cloud, с возможностью настройки температуры генерации и максимального количества токенов.

### Перевод текста
- **Описание:**  
  Бот может переводить текст с одного языка на другой с использованием **Yandex Translate API**. Поддерживаются любые языки для перевода.
  
### Синтез речи (Text-to-Speech)
- **Описание:**  
  Бот может преобразовывать текст в речь с использованием **Yandex TTS API**. Текст генерируется в аудиофайл (формат MP3), который отправляется пользователю.
- **Интеграция:**  
  Используется **Yandex TTS API** для синтеза речи с поддержкой различных голосов и настройки скорости воспроизведения.

### Виртуальные музеи (Аудио музей)
- **Описание:**  
  Бот позволяет пользователю получить информацию о музее и прослушать аудиофайл с описанием музея. Пользователь вводит название музея, и бот создает описание с помощью **Yandex GPT**, очищает его от специальных символов и отправляет аудиофайл с помощью **Yandex TTS API**.
- **Функционал:**  
  - Поиск информации о музее через **Yandex XML Search API**.
  - Генерация текста с использованием **Yandex GPT**.
  - Синтез речи с использованием **Yandex TTS API**.

---

## Команды

### `/start`
- **Описание:**  
  Инициализирует бота и выводит приветственное сообщение с кнопками команд:
  - Перевод текста
  - Анализ текста
  - Установка языков перевода
  - Генерация текста
  - Аудио музей

### `/help`
- **Описание:**  
  Отображает список доступных команд и их описание.

### `/setlang <source_lang> <target_lang>`
- **Описание:**  
  Устанавливает языки для перевода, где `<source_lang>` — исходный язык, а `<target_lang>` — целевой язык.  
- **Пример:**  
  `/setlang en ru` — перевод с английского на русский.

### `/translate`
- **Описание:**  
  При активации этой команды бот попросит пользователя отправить текст для перевода. Текст будет переведен с указанного исходного языка на целевой.

### `/analyze`
- **Описание:**  
  При активации этой команды бот попросит пользователя отправить текст для анализа. После чего текст будет проанализирован, и будет выведен результат (позитивный, негативный или нейтральный).

### `/generate`
- **Описание:**  
  При активации этой команды бот попросит пользователя отправить текстовый запрос для генерации текста с использованием модели Yandex GPT.

### `/museum_audio`
- **Описание:**  
  При активации этой команды бот попросит пользователя ввести название музея для получения аудио описания музея. Бот будет использовать **Yandex XML Search API** для поиска информации о музее и генерировать текст с помощью **Yandex GPT**, который будет преобразован в аудио файл с помощью **Yandex TTS API**.

---

## Работа с клавиатурой

После команды `/start` пользователю будет показана клавиатура с кнопками для выбора действия:
- **Перевести** — для перевода текста.
- **Анализировать** — для анализа текста.
- **Установить языки** — для установки языков перевода.
- **AI ассистент** — для генерации текста с использованием Yandex GPT.
- **Аудио музей** — для получения аудиофайла с описанием музея.

---

## Пример взаимодействия с ботом

### Запуск бота
1. Пользователь запускает бота и получает приветственное сообщение с кнопками.

### Перевод текста
1. Пользователь нажимает на кнопку **"Перевести"**, после чего бот просит отправить текст для перевода.
2. Пользователь отправляет текст, и бот переводит его на выбранный целевой язык.

### Анализ текста
1. Пользователь нажимает на кнопку **"Анализировать"**, после чего бот просит отправить текст для анализа.
2. Пользователь отправляет текст, и бот анализирует его, определяя, позитивный ли он, негативный или нейтральный.

### Установка языков перевода
1. Пользователь нажимает на кнопку **"Установить языки"**, и бот просит ввести исходный и целевой языки.
2. После установки языков бот будет использовать их для перевода.

### Генерация текста
1. Пользователь нажимает на кнопку **"AI ассистент"**, после чего бот просит отправить текстовый запрос для генерации.
2. Бот отправляет запрос в Yandex GPT и выводит сгенерированный ответ.

### Аудио музей
1. Пользователь нажимает на кнопку **"Аудио музей"**, после чего бот просит ввести название музея.
2. После получения названия, бот находит информацию о музее через **Yandex XML Search API**, генерирует описание через **Yandex GPT**, очищает текст от спецсимволов и синтезирует речь для создания аудиофайла, который отправляется пользователю.

---

## Библиотеки, используемые в проекте

- **nltk** — для анализа настроений текста (VADER Sentiment Analysis).
- **telebot** — для создания Telegram-бота с использованием API Telegram.
- **ssl** — для обеспечения безопасных соединений при скачивании ресурсов.
- **requests** — для выполнения HTTP-запросов к API Yandex GPT, Yandex Translate, Yandex TTS, и Yandex Vision.
- **dotenv** — для загрузки переменных окружения из `.env` файла.
- **re** — для очистки текста от специальных символов перед синтезом речи.

---

## Настройка

1. **Убедитесь, что у вас установлен Python 3.x.**

2. **Установите необходимые библиотеки:**

   ```bash
   pip install telebot nltk requests python-dotenv


# Настройка Yandex Cloud для работы с ботом TryCan

Для того чтобы бот мог работать с сервисами Yandex Cloud (например, Yandex GPT, Yandex TTS, Yandex Translate и т.д.), необходимо создать аккаунт в Yandex Cloud, получить IAM токен и настроить сервисный аккаунт. Далее приведены шаги, которые помогут вам настроить все необходимые параметры.

---

## 1. Создание аккаунта в Yandex Cloud

1. Перейдите на сайт [Yandex Cloud](https://cloud.yandex.com/) и нажмите на кнопку **"Войти"** или **"Регистрация"**.
2. Введите свой логин и пароль для аккаунта Yandex или создайте новый аккаунт, если у вас его нет.
3. После регистрации или входа в систему вы попадете в консоль Yandex Cloud.

---

## 2. Создание проекта в Yandex Cloud

1. В консоли Yandex Cloud, на главной странице, нажмите на кнопку **"Создать проект"**.
2. Укажите название проекта (например, `trycan-bot`), выберите **"Финансирование"** (можно оставить на бесплатном тарифе) и выберите **"Местоположение"** для вашего проекта.
3. Нажмите на **"Создать"** для завершения создания проекта.

---

## 3. Создание сервисного аккаунта

Сервисный аккаунт используется для безопасного взаимодействия с API Yandex Cloud. Он позволяет вашему приложению обращаться к Yandex Cloud без использования личных данных.

### Шаги для создания сервисного аккаунта:

1. Перейдите в раздел **"IAM & Сервисы"** в Yandex Cloud Console.
2. В меню слева выберите **"Сервисные аккаунты"**.
3. Нажмите на кнопку **"Создать сервисный аккаунт"**.
4. Введите название сервисного аккаунта (например, `trycan-bot-service-account`), выберите проект, для которого будет создан сервисный аккаунт, и установите необходимые права (например, доступ к Yandex TTS, Yandex GPT, Yandex Translate и другим сервисам).
5. Нажмите **"Создать"**.

---

## 4. Получение IAM токена

IAM токен необходим для аутентификации при работе с API Yandex Cloud.

### Шаги для получения IAM токена:

1. В консоли Yandex Cloud перейдите в раздел **"IAM & Сервисы"**.
2. В меню слева выберите **"API ключи"**.
3. Нажмите на кнопку **"Создать API ключ"**.
4. Выберите **"Создать IAM токен"**.
5. В открывшемся окне выберите сервисный аккаунт, который вы создали ранее.
6. Нажмите **"Создать"**.
7. Скопируйте IAM токен — он будет вам нужен для настройки бота.

> **Важно:** IAM токен необходимо хранить в безопасности, так как с его помощью можно получить доступ к сервисам Yandex Cloud.

---

## 5. Настройка и получение других необходимых ключей

Для работы с Yandex GPT, Yandex TTS и Yandex Translate, вам также понадобится API ключ для каждого из этих сервисов. В Yandex Cloud можно создать эти ключи через консоль.

### Получение API ключа для Yandex GPT и других сервисов:

1. Перейдите в консоль Yandex Cloud.
2. В меню слева выберите **"API"** и перейдите в раздел **"API ключи"**.
3. Нажмите **"Создать API ключ"**.
4. Укажите нужный сервис (например, Yandex GPT, Yandex Translate, Yandex TTS).
5. Скопируйте ключ и сохраните его для использования в настройках вашего бота.

---

## 6. Настройка .env файла

После получения всех необходимых токенов и ключей вам нужно настроить файл `.env` в вашем проекте для хранения этих данных.

1. В корне проекта создайте файл `.env`, если его нет.
2. Добавьте в него следующие строки:

```bash
TOKEN_BOT=your_telegram_bot_api_token
YANDEX_GPT_API_KEY=your_yandex_gpt_api_key
YANDEX_IAM_TOKEN=your_yandex_iam_token
YANDEX_FOLDER_ID=your_yandex_folder_id
CATALOG_ID=your_yandex_catalog_id
```

# Тестирование
запуск бота: ``` python main.py ```